#### 什么是 Webpack?
Webpack 是JavaScript应用程序的静态模块打包工具，其核心的功能是解决模块之前的依赖，通过分析模块间的依赖，在其内部构建出一个依赖图，把各个模块按照特定的规则和顺序组织在一起，最终合并为一个或多个JS文件。
主要作用如下：
- 模块打包：整合不同模块的文件，保证他们之间引用正确，执行有序
- 编译兼容：通过webpack的loader机制，不仅可以编译转换诸如.less，.vue，.jsx在浏览器无法识别的格式文件，还可以帮助我们对代码做polyfill，让我们在开发的时候可以使用新特性和新语法，提高开发效率
- 能力扩展：通过webpack的plugin机制，我们在实现模块化打包和编译兼容的基础上，可以进一步实现诸如按需加载，代码压缩等一系列功能，进一步提高自动化程度，工程效率及打包输出的质量。

-----

#### Webpack 的工作流程
- 初始化参数：读取项目中 webapck.config.js 配置文件，或从 shell 语句中获取必要的参数。初始化时会生成一个compiler实例，该实例包含了完整的webpack配置，且全局只有一个compiler实例。
- 开始编译：将所需的webpack插件实例化。当插件被实例化时，就会收到一个compiler对象,通过这个对象可以访问webpack的内部环境
- 确定入口：根据配置所定义的入口文件，从入口文件开始进行依赖收集，对所有依赖的文件通过loader进行解析。
- 输出：根据入口和模块之间的依赖关系，将结果打包到相应目录
  
-----
  
#### loader 和 plugin 的区别？
loader是一个转换器，它的工作就是接收源文件，并对源文件进行处理，并返回编译后的文件。本质上是一个函数。
plugin是一个扩展器，它丰富了webpack本身，在loader中的操作执行结束后，webpack进行打包是，webpack plugin 并不直接操作文件，而是基于事件机制工作，监听webpack打包过程中的某些事件，见缝插针，修改打包结果。本质上是一个带有apply(compiler)的类，基于 tapable 这个事件流框架来监听 webpack 打包过程中发布的hooks来通过自定义的逻辑和功能改变输出结果。
- loader运行于打包文件之前，plugin则在整个编译周期都在起作用。


-----

#### webpack 的热更新原理？
模块热替换，在不需要刷新整个页面的同时更新模块，能够提升开发的效率和体验。只会局部刷新页面上发生变化的模块，同时可以保留当前页面的状态。<br/>
HMR需要手动开启，确保项目基于webpack-dev-server，在devServer配置{hot:true}开启HMR。开启HMR后,webpack会为每个模块绑定一个module.hot对象，这个对象包含HMR的API。<br/>
核心原理就是客户端从服务端拉取更新后的资源(准确的说，HMR拉取的不是整个资源文件，而是chunk diff,即chunk需要更新的部分)。webpack-dev-server 与 浏览器之前维护了一个 websocket,webpack监听到文件变化后，增量构建发生变更的模块，并通过Websocket发送hash事件。浏览器接收到hash事件后，请求mainfest资源文件，确认增量变更范围。并触发变更模块的module.hot.accept回调执行变更逻辑。